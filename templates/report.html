<!DOCTYPE html>
<html lang="en">
<head>
  <title>CS2 RPB Report</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,900" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/app.3c3c217a.css') }}">

  <link rel="stylesheet" href="{{ url_for('static', filename='fonts/icomoon/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery-ui.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.carousel.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.theme.default.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery.fancybox.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-datepicker.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='fonts/flaticon/font/flaticon.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/aos.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

  <script type="text/javascript"
          src="//dapi.kakao.com/v2/maps/sdk.js?appkey=9bdc8cf728208c1547814c1428702cae&libraries=services"></script>


  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <style>
    h1, h2, h3, h4, h5 {
      color: #0b0b0b;
    }

    .container h2 {
      font-weight: 800;
    }

    .container thead tr {
      background-color: #e9ecef;
    }

    .container th {
      font-size: 18px;
      color: #0b0b0b;
    }

    .container td {
      color: #1d2124;
    }

  </style>
</head>

<body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">

<div class="site-wrap">

  <div class="site-mobile-menu site-navbar-target">
    <div class="site-mobile-menu-header">
      <div class="site-mobile-menu-close mt-3">
        <span class="icon-close2 js-menu-toggle"></span>
      </div>
    </div>
    <div class="site-mobile-menu-body"></div>
  </div>


  <header class="site-navbar py-4 js-sticky-header site-navbar-target" role="banner">

    <div class="container">
      <div class="row align-items-center">

        <div class="col-6 col-xl-2">
          <h1 class="mb-0 site-logo"><a href="localhost:8080" class="h2 mb-0" style="font-size: 29px;">RPB Report<span
            class="text-primary">.</span> </a></h1>
        </div>

        <div class="col-12 col-md-10 d-none d-xl-block">
          <nav class="site-navigation position-relative text-right" role="navigation">

            <ul class="site-menu main-menu js-clone-nav mr-auto d-none d-lg-block">
              <li style="color:black; font-weight: bold;"><span class="text-danger">{{apt['apt_info']['동']}} {{apt['apt_info']['단지명']}}</span> 분석 리포트</li>
              <li><a href="#home-section" class="nav-link">˚Home</a></li>
              <li><a href="#about-section" class="nav-link">˚단지정보</a></li>
              <li><a href="#team-section" class="nav-link">˚동향</a></li>
              <li><a href="#services-section" class="nav-link">˚실거래 데이터</a></li>
              <li><a href="#testimonials-section" class="nav-link">˚{{apt['apt_info']['구']}} / {{apt['apt_info']['동']}} 동향</a></li>
            </ul>
          </nav>
        </div>


        <div class="col-6 d-inline-block d-xl-none ml-md-0 py-3" style="position: relative; top: 3px;"><a href="#"
                                                                                                          class="site-menu-toggle js-menu-toggle text-black float-right"><span
          class="icon-menu h3"></span></a></div>

      </div>
    </div>

  </header>

  <!--     2000 x 1013-->
  <div class="site-blocks-cover overlay" style="background-image: url(img/bg2.jpeg);" data-aos="fade"
       id="home-section">
    <div class="container">
      <div class="row align-items-center justify-content-center">
        <div class="col-md-6 mt-lg-5 text-center">
          <h1 style="font-size: 80px;">CS2's R.P.B.</h1>
          <p class="mb-2" style="font-size: 20px">
            충북대학교 소프트웨어학과 CS2팀에서 만든
          </p>
          <p><span class="text-danger" style="font-size: 30px; font-weight: bold;">
                          {{apt['apt_info']['동']}} {{apt['apt_info']['단지명']}}</span>의</p>

          <p style="font-size: 20px;">분석 리포트 입니다.</p>
          <div>
            <a href="#about-section" class="btn btn-primary mr-2 mb-2 nav-link">Get Started</a>
          </div>
        </div>

      </div>
    </div>
  </div>


  <!-- 단지정보 -->
  <div class="site-section cta-big-image" id="about-section">
    <div class="container">
      <img src="img/tag.jpg" alt="Image" class="img-fluid">
      <h2>단지정보</h2>
      <h5 style="font-size: 14px;">
        {{apt['apt_info']['도']}} {{apt['apt_info']['시']}} {{apt['apt_info']['구']}} {{apt['apt_info']['동']}} {{apt['apt_info']['번지']}}번지
      </h5>
      <h5 style="font-size: 14px;">
        ({{apt['apt_info']['도']}} {{apt['apt_info']['시']}} {{apt['apt_info']['구']}} {{apt['apt_info']['동']}} {{apt['apt_info']['도로명']}})
      </h5>
      <div id="map" style="width:100%; height:300px; margin-bottom: 3%;"></div>
      <script>
        container = document.getElementById('map');
        mapOptions = { //지도를 생성할 때 필요한 기본 옵션
          center: new daum.maps.LatLng(36.625637, 127.454394), //지도의 중심좌표.
          level: 3, //지도의 레벨(확대, 축소 정도)
          disableDoubleClick: true
        };

        map = new daum.maps.Map(container, mapOptions); //지도 생성 및 객체 리턴
        mapTypeControl = new daum.maps.MapTypeControl();

        // 지도에 컨트롤을 추가해야 지도위에 표시됩니다
        // daum.maps.ControlPosition은 컨트롤이 표시될 위치를 정의하는데 TOPRIGHT는 오른쪽 위를 의미합니다
        map.addControl(mapTypeControl, daum.maps.ControlPosition.TOPRIGHT);

        // 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다
        zoomControl = new daum.maps.ZoomControl();
        map.addControl(zoomControl, daum.maps.ControlPosition.RIGHT);
        map.setDraggable(false);
        map.setZoomable(false);


        var geocoder = new daum.maps.services.Geocoder();


        myword =
          {{apt['apt_info']['도']|tojson|safe}}+
          {{apt['apt_info']['시']|tojson|safe}}+
          {{apt['apt_info']['구']|tojson|safe}}+
          {{apt['apt_info']['동']|tojson|safe}}+
          {{apt['apt_info']['번지']|tojson|safe}}

        // 주소로 좌표를 검색합니다
        geocoder.addressSearch(myword, function (result, status) {
          // 정상적으로 검색이 완료됐으면
          if (status === daum.maps.services.Status.OK) {

            var coords = new daum.maps.LatLng(result[0].y, result[0].x);

            // 결과값으로 받은 위치를 마커로 표시합니다
            var marker = new daum.maps.Marker({
              map: map,
              position: coords
            });

            // 인포윈도우로 장소에 대한 설명을 표시합니다
            var infowindow = new daum.maps.InfoWindow({
              content: '<div style="width:150px;text-align:center;padding:6px 0;">'+"{{apt['apt_info']['동']}} {{apt['apt_info']['단지명']}}"+'</div>'
            });
            infowindow.open(map, marker);

            // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
            map.setCenter(coords);
          }
        });
      </script>
      <div class="row" style="text-align: center;">
        <div class="col-md-6">
          <table class="table table-white table-hover">
            <thead>
            <tr>
              <th style="width: 36%;">구분</th>
              <th>정보</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>단지명</td>
              <td>{{apt['apt_info']['단지명']}}</td>
            </tr>
            <tr>
              <td>전용면적</td>
              <td>
                {{apt['apt_info']['전용면적']}}(m<sup>2</sup>)</td>
            </tr>
            <tr>
              <td>총세대수</td>
              <td>{{apt['apt_info']['총세대수']}}</td>
            </tr>
            <tr>
              <td>난방방식</td>
              <td>{{apt['apt_info']['난방방식']}}</td>
            </tr>
            <tr>
              <td>총동수</td>
              <td>{{apt['apt_info']['총동수']}}</td>
            </tr>
            <tr>
              <td>학군</td>
              <td>
                {{apt['apt_info']['학군(1)']}}<br>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
        <div class="col-md-6">
          <table class="table table-white table-hover">
            <thead>
            <tr>
              <th style="width: 36%;">구분</th>
              <th>정보</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>총 주차대수</td>
              <td>{{apt['apt_info']['총주차대수']}}</td>
            </tr>
            <tr>
              <td style="font-size: 12px;">세대당주차대수</td>
              <td>{{apt['apt_info']['세대당주차대수']}}</td>
            </tr>
            <tr>
              <td>층수</td>
              <td>{{apt['apt_info']['최고층']}}</td>
            </tr>
            <tr>
              <td>건축년도</td>
              <td>{{apt['apt_info']['건축년도']}}</td>
            </tr>
            <tr>
              <td>건설회사</td>
              <td>{{apt['apt_info']['건설회사']}}</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
<script>
  console.log("{{apt['apt_info']}}");
</script>

  <!-- 동향 : 해당 부동산 분석차트 -->
  <div class="site-section cta-big-image" id="team-section">
    <div class="container">
      <img src="img/tag.jpg" alt="Image" class="img-fluid">
      <h2>최근 10년간 동향</h2>
      <canvas id="line-chart" width="100%" height="80"></canvas>
      <script>
        new Chart(document.getElementById("line-chart"), {
          type: 'line',
          data: {
            labels: {{aptdate|safe}},
            datasets: [
              {
                data: [
                  {% if price|length > 1 %}
                    {% for i in range(0, (price|length) -2) %}
                      null,
                    {% endfor %}
                    {% for i in range(-2,0,1) %}
                      {{ price[i]|float }},
                    {% endfor %}
                  {%else%}
                    {% for i in range(0, (price|length)) %}
                      null,
                    {% endfor %}
                  {% endif %}
                ],
                label: "랜덤 포레스트 분석(현재 이후 예측)",
                // borderDash: [5, 5],
                borderColor: "rgb(128, 0, 128)",
                backgroundColor: "rgba(128,0,128,0.2)",
                yAxisID : 'A',
                fill: false
              },
              {
              data: [
                      {% for i in apt['trade'].keys() %}
                {{ apt['trade'][i]['매매가']|safe  }},
                {% endfor %}
              ],
              label: "매매가(만원)",
              borderColor: "rgba(64,224,208,1)",
              backgroundColor: "rgba(64,224, 208, 0.2)",
              yAxisID : 'A',
              fill: true
            }, {
              data: [
                      {% for i in apt['trade'].keys() %}
                {{ apt['trade'][i]['매매량']|safe }},
                {% endfor %}
              ],
              label: "매매량(건)",
              borderColor: "rgba(255,182,193,1)",
              backgroundColor: "rgba(255,182,193,0.2)",
              yAxisID : 'B',
              fill: true
            }]
          },
          options: {
            title: {
              display: true,
              fontSize: 20,
              text: "{{apt['apt_info']['동']}} {{apt['apt_info']['단지명']}}"+' 매매가 / 매매량 동향'
            },
            tooltips: {
              mode: 'index',
              intersect: false
            },
            hover: {
              mode: 'nearest',
              intersect: true
            },
            scales:{
              yAxes : [
                {
                  id : 'A',
                  type : 'linear',
                  position : 'left'
                },{
                  id :'B',
                  type : 'linear',
                  position : 'right'
                }
              ]
            }
          }
        });
      </script>
    </div>
  </div>


  <!-- 실거래데이터 : 해당 부동산 실거래데이터 -->
  <div class="site-section cta-big-image" id="services-section">
    <div class="container">
      <img src="img/tag.jpg" alt="Image" class="img-fluid">
      <h2>실거래 데이터</h2>
      <div class="col" style="text-align: center;">
        <table class="table table-white table-hover">
          <thead>
          <tr>
            <th>거래년월</th>
            <th>거래 층</th>
            <th>거래금액(만원)</th>
          </tr>
          </thead>
          <tbody>
          {% for ml in mylist %}
          <tr>
            <td>{{ml[0]}}</td>
            <td>{{ml[1]}}</td>
            <td>{{ml[2]}}</td>
          </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>


  <!-- 00구 00동 동향 : 해당 부동산이 위치하는 '동'에 해당하는 분석 -->
  <div class="site-section cta-big-image" id="testimonials-section">
    <div class="container">
      <img src="img/tag.jpg" alt="Image" class="img-fluid">
      <h2>{{apt['apt_info']['구']}} / {{apt['apt_info']['동']}} 동향</h2>
      <div class="col">
        <canvas id="line-chart3" width="100%" height="80"></canvas>
             <script>
        new Chart(document.getElementById("line-chart3"), {
          type: 'line',
          data: {
            labels: [2011,2012,2013,2014,2015,2016,2017,2018,2019],
            datasets: [
              {
                data: [
                    {% if gudata[guname]['pred_price']|length > 1 %}
                    {% for i in range(0, (gudata[guname]['pred_price']|length) -2) %}
                      null,
                    {% endfor %}
                    {% for i in range((gudata[guname]['pred_price']|length)-2,gudata[guname]['pred_price']|length) %}
                      {{ gudata[guname]['pred_price'][i]|float }},
                    {% endfor %}
                  {%else%}
                    {% for i in range(0, (gudata[guname]['pred_price']|length)) %}
                      null,
                    {% endfor %}
                  {% endif %}
                ],
                label: "랜덤 포레스트 분석(현재 이후 예측)",
                // borderDash: [5, 5],
                borderColor: "rgb(128, 0, 128)",
                backgroundColor: "rgba(128,0,128,0.2)",
                yAxisID : 'A',
                fill: false
              },
              {
              data: [
                {% for i in gudata[guname]['trade_price'] %}
                {{ i|float }},
                {% endfor %}
              ],
              label: "매매가(만원)",
              borderColor: "rgba(64,224,208,1)",
              backgroundColor: "rgba(64,224, 208, 0.2)",
              yAxisID : 'A',
              fill: true
            }, {
              data: [
                {% for i in gudata[guname]['trade_count'] %}
                {{ i|float }},
                {% endfor %}
              ],
              label: "매매량(건)",
              borderColor: "rgba(255,182,193,1)",
              backgroundColor: "rgba(255,182,193,0.2)",
              yAxisID : 'B',
              fill: true
            }]
          },
          options: {
            title: {
              display: true,
              fontSize: 20,
              text: "{{apt['apt_info']['구']}}"+' 매매가 / 매매량 동향'
            },
            tooltips: {
              mode: 'index',
              intersect: false
            },
            hover: {
              mode: 'nearest',
              intersect: true
            },
            scales:{
              yAxes : [
                {
                  id : 'A',
                  type : 'linear',
                  position : 'left'
                },{
                  id :'B',
                  type : 'linear',
                  position : 'right'
                }
              ]
            }
          }
        });
      </script>
        <canvas id="line-chart4" width="100%" height="80" style="margin-top: 100px;"></canvas>
             <script>
        new Chart(document.getElementById("line-chart4"), {
          type: 'line',
          data: {
            labels: {{ dongdata[dongname]['date']|safe }},
            datasets: [
              {
                data: [
                    {% if dongdata[dongname]['predict']|length > 1 %}
                    {% for i in range(0, (dongdata[dongname]['predict']|length) -2) %}
                      null,
                    {% endfor %}
                    {% for i in range( (dongdata[dongname]['predict']|length) -2, dongdata[dongname]['predict']|length )  %}
                      {{ dongdata[dongname]['predict'][dongdata[dongname]['date'][i]]|float }},
                    {% endfor %}
                  {%else%}
                    {% for i in range(0, (dongdata[dongname]['predict']|length)) %}
                      null,
                    {% endfor %}
                  {% endif %}
                ],
                label: "랜덤 포레스트 분석(현재 이후 예측)",
                // borderDash: [5, 5],
                borderColor: "rgb(128, 0, 128)",
                backgroundColor: "rgba(128,0,128,0.2)",
                yAxisID : 'A',
                fill: false
              },
              {
              data: [
                      {% for i in dongdata[dongname]['trade'].keys() %}
                      {{ dongdata[dongname]['trade'][i]['매매가']|safe  }},
                      {% endfor %}
              ],
              label: "매매가(만원)",
              borderColor: "rgba(64,224,208,1)",
              backgroundColor: "rgba(64,224, 208, 0.2)",
              yAxisID : 'A',
              fill: true
            }, {
              data: [
                      {% for i in dongdata[dongname]['trade'].keys() %}
                      {{ dongdata[dongname]['trade'][i]['매매량']|safe  }},
                      {% endfor %}
              ],
              label: "매매량(건)",
              borderColor: "rgba(255,182,193,1)",
              backgroundColor: "rgba(255,182,193,0.2)",
              yAxisID : 'B',
              fill: true
            }]
          },
          options: {
            title: {
              display: true,
              fontSize: 20,
              text: "{{apt['apt_info']['동']}}"+' 매매가 / 매매량 동향'
            },
            tooltips: {
              mode: 'index',
              intersect: false
            },
            hover: {
              mode: 'nearest',
              intersect: true
            },
            scales:{
              yAxes : [
                {
                  id : 'A',
                  type : 'linear',
                  position : 'left'
                },{
                  id :'B',
                  type : 'linear',
                  position : 'right'
                }
              ]
            }
          }
        });
      </script>

              <canvas id="line-chart2" width="100%" height="110" style="margin-top: 100px;"></canvas>
      <script>
        new Chart(document.getElementById("line-chart2"), {
          type: 'polarArea',
          data: {
            labels: [
              '전용면적',
              '거래금액(만원)',
              '층',
              '건축년도',
              '총세대수',
              '총동수',
              '최저층',
              '최고층',
              '총주차대수',
              '세대당주차대수',
              '계약 월'
            ],
            datasets: [{
              data: [
                {{pear['전용면적']|tojson|safe}},
                {{pear['거래금액(만원)']|tojson|safe}},
                {{pear['층']|tojson|safe}},
                {{pear['건축년도']|tojson|safe}},
                {{pear['총세대수']|tojson|safe}},
                {{pear['총동수']|tojson|safe}},
                {{pear['최저층']|tojson|safe}},
                {{pear['최고층']|tojson|safe}},
                {{pear['총주차대수']|tojson|safe}},
                {{pear['세대당주차대수']|tojson|safe}},
                {{pear['계약 월']|tojson|safe}},
              ],
              label: "매매가(만원)",
              backgroundColor :[
                "rgba(255, 185, 0, 0.4)",
                "rgba(231, 72, 86, 0.4)",
                "rgba(0, 120, 215, 0.4)",
                "rgba(0, 153, 188, 0.4)",
                "rgba(122, 117, 116, 0.4)",
                "rgba(255, 140, 0, 0.4)",
                "rgba(232, 17, 35, 0.4)",
                "rgba(0, 99, 177, 0.4)",
                "rgba(107, 105, 214, 0.4)",
                "rgba(0, 204, 106, 0.4)",
                "rgba(0, 204, 106, 0.4)",
              ],
              hoverBackgroundColor :[
                "rgba(255, 185, 0, 0.9)",
                "rgba(231, 72, 86, 0.9)",
                "rgba(0, 120, 215, 0.9)",
                "rgba(0, 153, 188, 0.9)",
                "rgba(122, 117, 116, 0.9)",
                "rgba(255, 140, 0, 0.9)",
                "rgba(232, 17, 35, 0.9)",
                "rgba(0, 99, 177, 0.9)",
                "rgba(107, 105, 214, 0.9)",
                "rgba(0, 204, 106, 0.9)",
                "rgba(0, 204, 106, 0.9)",
              ],
              borderColor: "rgba(0,0,0,0)",
              fill: false
            }]
          },
          options: {
            title: {
              display: true,
              fontSize: 20,
              text: "{{apt['apt_info']['구']}}"+'의 매매가와 상관계수'
            }
          }
        });
      </script>
      </div>
    </div>
  </div>

  <!-- footer -->
  <footer class="footer" style="background-color: darkgray; height: 200px;">
    <div class="container">
      <div class="row" style="text-align: center;">
        <div class="col">
          <p style="color: dimgray">
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            Copyright &copy;<script>
            document.write(new Date().getFullYear());
          </script>
            All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a
            href="https://colorlib.com" target="_blank">Colorlib</a>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
          </p>
        </div>
      </div>
    </div>
  </footer>

</div> <!-- .site-wrap -->

<script src="{{ url_for('static', filename='js/jquery-3.3.1.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery-migrate-3.0.1.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery-ui.js') }}"></script>
<script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/owl.carousel.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.stellar.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.countdown.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-datepicker.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.easing.1.3.js') }}"></script>
<script src="{{ url_for('static', filename='js/aos.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.fancybox.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.sticky.js') }}"></script>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>
